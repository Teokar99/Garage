<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Export Demo - html2canvas + jsPDF</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }

        .demo-controls {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .demo-controls h1 {
            margin: 0 0 20px 0;
            color: #333;
        }

        .demo-controls button {
            background: #007cba;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin-right: 10px;
        }

        .demo-controls button:hover {
            background: #005a87;
        }

        .demo-controls textarea {
            width: 100%;
            height: 100px;
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: Arial, sans-serif;
        }

        .demo-controls label {
            display: block;
            margin: 10px 0 5px 0;
            font-weight: bold;
        }

        /* PDF Styles */
        .pdf-container {
            font-family: Arial, sans-serif;
            width: 794px;
            min-height: 1123px;
            padding: 20px;
            background: #fff;
            color: #333;
            line-height: 1.6;
            font-size: 14px;
            position: absolute;
            opacity: 0;
            pointer-events: none;
            z-index: -1;
            left: 0;
            top: 0;
        }

        .pdf-header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 3px solid #2563eb;
            padding-bottom: 20px;
        }

        .company-name {
            font-size: 24px;
            font-weight: 700;
            color: #1e40af;
            margin-bottom: 8px;
        }

        .company-details {
            font-size: 12px;
            color: #666;
            margin-bottom: 15px;
            line-height: 1.4;
        }

        .work-order-title {
            font-size: 20px;
            font-weight: 600;
            color: #374151;
            margin-top: 10px;
        }

        .date {
            font-size: 14px;
            color: #6b7280;
            margin-top: 5px;
        }

        .pdf-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }

        .pdf-section {
            background: #f8fafc;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #2563eb;
        }

        .section-title {
            font-size: 16px;
            font-weight: 600;
            color: #1e40af;
            margin-bottom: 12px;
            border-bottom: 1px solid #e2e8f0;
            padding-bottom: 5px;
        }

        .field {
            margin-bottom: 8px;
            font-size: 13px;
        }

        .field-label {
            display: inline-block;
            width: 100px;
            font-weight: 500;
            color: #374151;
        }

        .field-value {
            color: #6b7280;
        }

        .services-section {
            grid-column: 1 / -1;
            margin-top: 15px;
        }

        .services-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
            background: #fff;
            border-radius: 8px;
            overflow: hidden;
            font-size: 13px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .services-table th {
            background: #2563eb;
            color: white;
            padding: 10px 8px;
            text-align: left;
            font-weight: 500;
        }

        .services-table td {
            padding: 10px 8px;
            border-bottom: 1px solid #e2e8f0;
        }

        .services-table tr:nth-child(even) {
            background: #f8fafc;
        }

        .services-table tr:last-child td {
            border-bottom: none;
        }

        .totals-section {
            grid-column: 1 / -1;
            margin-top: 15px;
            display: flex;
            justify-content: flex-end;
        }

        .totals-box {
            background: #f1f5f9;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
            min-width: 250px;
        }

        .total-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 13px;
        }

        .total-row.final {
            border-top: 2px solid #2563eb;
            padding-top: 8px;
            margin-top: 8px;
            font-size: 16px;
            font-weight: 700;
            color: #1e40af;
        }

        .notes-section {
            grid-column: 1 / -1;
            margin-top: 15px;
        }

        .notes-content {
            background: #fff;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
            min-height: 80px;
            font-size: 13px;
            white-space: pre-wrap;
            margin-top: 8px;
        }

        .notes-placeholder {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 12px;
            border-radius: 8px;
            font-size: 13px;
            text-align: center;
            color: #856404;
            font-weight: 500;
            margin-top: 8px;
        }

        .pdf-footer {
            margin-top: 30px;
            text-align: center;
            font-size: 11px;
            color: #9ca3af;
            border-top: 1px solid #e2e8f0;
            padding-top: 15px;
        }

        /* Page 2 styles */
        .pdf-page-2 {
            font-family: Arial, sans-serif;
            width: 794px;
            min-height: 1123px;
            padding: 20px;
            background: #fff;
            color: #333;
            line-height: 1.6;
            font-size: 14px;
            position: absolute;
            opacity: 0;
            pointer-events: none;
            z-index: -1;
            left: -9999px;
            top: 0;
            display: none;
        }

        .page-2-header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #2563eb;
            padding-bottom: 15px;
        }

        .page-2-title {
            font-size: 18px;
            font-weight: 600;
            color: #1e40af;
        }

        .page-2-notes {
            background: #f8fafc;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #2563eb;
            font-size: 14px;
            white-space: pre-wrap;
            line-height: 1.8;
        }
    </style>
</head>
<body>
    <div class="demo-controls">
        <h1>ğŸš€ PDF Export Demo - html2canvas + jsPDF</h1>
        <p>This demo shows how to generate PDFs with proper page logic using html2canvas + jsPDF.</p>
        
        <label for="notesInput">Î Î±ÏÎ±Ï„Î·ÏÎ®ÏƒÎµÎ¹Ï‚ (Notes):</label>
        <textarea id="notesInput" placeholder="Î•Î¹ÏƒÎ¬Î³ÎµÏ„Îµ Ï„Î¹Ï‚ Ï€Î±ÏÎ±Ï„Î·ÏÎ®ÏƒÎµÎ¹Ï‚ ÎµÎ´Ï...">Î‘Ï…Ï„ÏŒ ÎµÎ¯Î½Î±Î¹ Î­Î½Î± Ï€Î±ÏÎ¬Î´ÎµÎ¹Î³Î¼Î± ÏƒÎ·Î¼ÎµÎ¹ÏÏƒÎµÏ‰Î½ Ï€Î¿Ï… Î¸Î± ÎµÎ¼Ï†Î±Î½Î¹ÏƒÏ„ÎµÎ¯ ÏƒÏ„Î¿ PDF.

ÎœÏ€Î¿ÏÎµÎ¯Ï„Îµ Î½Î± Ï€ÏÎ¿ÏƒÎ¸Î­ÏƒÎµÏ„Îµ Ï€ÎµÏÎ¹ÏƒÏƒÏŒÏ„ÎµÏÎ¿ ÎºÎµÎ¯Î¼ÎµÎ½Î¿ ÎµÎ´Ï Î³Î¹Î± Î½Î± Î´Î¿ÎºÎ¹Î¼Î¬ÏƒÎµÏ„Îµ Ï„Î· Î»Î¿Î³Î¹ÎºÎ® ÏƒÎµÎ»Î¹Î´Î¿Ï€Î¿Î¯Î·ÏƒÎ·Ï‚.

Î•Î¬Î½ Ï„Î¿ ÎºÎµÎ¯Î¼ÎµÎ½Î¿ ÎµÎ¯Î½Î±Î¹ Ï€Î¿Î»Ï Î¼ÎµÎ³Î¬Î»Î¿, Î¸Î± Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î·Î¸ÎµÎ¯ Î´ÎµÏÏ„ÎµÏÎ· ÏƒÎµÎ»Î¯Î´Î± Î±Ï…Ï„ÏŒÎ¼Î±Ï„Î±.

Î‘Ï…Ï„Î® ÎµÎ¯Î½Î±Î¹ Î¼Î¹Î± Ï€Î¿Î»Ï Î¼ÎµÎ³Î¬Î»Î· ÏƒÎ·Î¼ÎµÎ¯Ï‰ÏƒÎ· Ï€Î¿Ï… Î¸Î± Ï€ÏÎ­Ï€ÎµÎ¹ Î½Î± Ï‡Ï‰ÏÎ¹ÏƒÏ„ÎµÎ¯ ÏƒÎµ Î´ÎµÏÏ„ÎµÏÎ· ÏƒÎµÎ»Î¯Î´Î± Î³Î¹Î±Ï„Î¯ Î´ÎµÎ½ Ï‡Ï‰ÏÎ¬ÎµÎ¹ ÏƒÏ„Î·Î½ Ï€ÏÏÏ„Î· ÏƒÎµÎ»Î¯Î´Î± Î¼Î±Î¶Î¯ Î¼Îµ ÏŒÎ»Î± Ï„Î± Î¬Î»Î»Î± ÏƒÏ„Î¿Î¹Ï‡ÎµÎ¯Î± Ï„Î¿Ï… ÎµÎ³Î³ÏÎ¬Ï†Î¿Ï….

Î ÎµÏÎ¹ÏƒÏƒÏŒÏ„ÎµÏÎµÏ‚ Î³ÏÎ±Î¼Î¼Î­Ï‚ ÎºÎµÎ¹Î¼Î­Î½Î¿Ï…...
Î‘ÎºÏŒÎ¼Î· Ï€ÎµÏÎ¹ÏƒÏƒÏŒÏ„ÎµÏÎµÏ‚ Î³ÏÎ±Î¼Î¼Î­Ï‚...
ÎšÎ±Î¹ Î¬Î»Î»ÎµÏ‚ Î³ÏÎ±Î¼Î¼Î­Ï‚ Î³Î¹Î± Î½Î± Î³ÎµÎ¼Î¯ÏƒÎµÎ¹ Î· ÏƒÎµÎ»Î¯Î´Î±...

Î¤Î­Î»Î¿Ï‚ Ï„Ï‰Î½ Ï€Î±ÏÎ±Ï„Î·ÏÎ®ÏƒÎµÏ‰Î½.</textarea>
        
        <br><br>
        <button onclick="generatePDF()">ğŸ“„ Generate PDF</button>
        <button onclick="testShortNotes()">ğŸ“ Test Short Notes (1 Page)</button>
        <button onclick="testLongNotes()">ğŸ“š Test Long Notes (2 Pages)</button>
    </div>

    <!-- PDF Content Templates (Hidden) -->
    <div id="pdf-page-1" class="pdf-container">
        <div class="pdf-header">
            <div class="company-name">Karabetsos I. Karabetsos L. O.E</div>
            <div class="company-details">
                Î¤Î·Î»: 802705280 | ÎšÎ¹Î½: 2106611800 | Email: carabetsos@yahoo.com<br>
                Î”Î¹ÎµÏÎ¸Ï…Î½ÏƒÎ·: Î‘Î³Î¯Î±Ï‚ 15, Î‘Î¸Î®Î½Î±, 15344
            </div>
            <div class="work-order-title">Î•Î½Ï„Î¿Î»Î® Î•ÏÎ³Î±ÏƒÎ¯Î±Ï‚</div>
            <div class="date" id="current-date"></div>
        </div>

        <div class="pdf-content">
            <div class="pdf-section">
                <div class="section-title">Î£Ï„Î¿Î¹Ï‡ÎµÎ¯Î± Î ÎµÎ»Î¬Ï„Î·</div>
                <div class="field"><span class="field-label">ÎŒÎ½Î¿Î¼Î±:</span>
                    <span class="field-value">Î“Î¹Î¬Î½Î½Î·Ï‚ Î Î±Ï€Î±Î´ÏŒÏ€Î¿Ï…Î»Î¿Ï‚</span></div>
                <div class="field"><span class="field-label">Î¤Î·Î»Î­Ï†Ï‰Î½Î¿:</span>
                    <span class="field-value">210-1234567</span></div>
                <div class="field"><span class="field-label">Email:</span>
                    <span class="field-value">giannis@example.com</span></div>
                <div class="field"><span class="field-label">Î”Î¹ÎµÏÎ¸Ï…Î½ÏƒÎ·:</span>
                    <span class="field-value">Î Î±Ï„Î·ÏƒÎ¯Ï‰Î½ 123, Î‘Î¸Î®Î½Î±</span></div>
                <div class="field"><span class="field-label">Î‘Î¦Îœ:</span>
                    <span class="field-value">123456789</span></div>
            </div>

            <div class="pdf-section">
                <div class="section-title">Î£Ï„Î¿Î¹Ï‡ÎµÎ¯Î± ÎŸÏ‡Î®Î¼Î±Ï„Î¿Ï‚</div>
                <div class="field"><span class="field-label">ÎœÎ¬ÏÎºÎ±:</span>
                    <span class="field-value">Toyota</span></div>
                <div class="field"><span class="field-label">ÎœÎ¿Î½Ï„Î­Î»Î¿:</span>
                    <span class="field-value">Corolla</span></div>
                <div class="field"><span class="field-label">ÎˆÏ„Î¿Ï‚:</span>
                    <span class="field-value">2020</span></div>
                <div class="field"><span class="field-label">Î Î¹Î½Î±ÎºÎ¯Î´Î±:</span>
                    <span class="field-value">Î‘Î’Î“-1234</span></div>
                <div class="field"><span class="field-label">VIN:</span>
                    <span class="field-value">1HGBH41JXMN109186</span></div>
                <div class="field"><span class="field-label">Î§Î¹Î»Î¹ÏŒÎ¼ÎµÏ„ÏÎ±:</span>
                    <span class="field-value">45,000</span></div>
            </div>

            <div class="pdf-section services-section">
                <div class="section-title">Î•ÏÎ³Î±ÏƒÎ¯ÎµÏ‚</div>
                <table class="services-table">
                    <thead>
                        <tr>
                            <th>Î‘/Î‘</th>
                            <th>Î ÎµÏÎ¹Î³ÏÎ±Ï†Î®</th>
                            <th style="text-align:center;">Î Î¿ÏƒÏŒÏ„Î·Ï„Î±</th>
                            <th style="text-align:right;">Î¤Î¹Î¼Î® ÎœÎ¿Î½Î¬Î´Î±Ï‚</th>
                            <th style="text-align:right;">Î£ÏÎ½Î¿Î»Î¿</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td>Î‘Î»Î»Î±Î³Î® Î»Î±Î´Î¹ÏÎ½</td>
                            <td style="text-align:center;">1</td>
                            <td style="text-align:right;">45.00â‚¬</td>
                            <td style="text-align:right;font-weight:600;">45.00â‚¬</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>Î¦Î¯Î»Ï„ÏÎ¿ Î»Î±Î´Î¹Î¿Ï</td>
                            <td style="text-align:center;">1</td>
                            <td style="text-align:right;">15.00â‚¬</td>
                            <td style="text-align:right;font-weight:600;">15.00â‚¬</td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ Ï†ÏÎ­Î½Ï‰Î½</td>
                            <td style="text-align:center;">1</td>
                            <td style="text-align:right;">25.00â‚¬</td>
                            <td style="text-align:right;font-weight:600;">25.00â‚¬</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="totals-section">
                <div class="totals-box">
                    <div class="total-row">
                        <span>Î¥Ï€Î¿ÏƒÏÎ½Î¿Î»Î¿:</span>
                        <span>85.00â‚¬</span>
                    </div>
                    <div class="total-row">
                        <span>Î¦Î Î‘ 24%:</span>
                        <span>20.40â‚¬</span>
                    </div>
                    <div class="total-row final">
                        <span>Î£Î¥ÎÎŸÎ›ÎŸ:</span>
                        <span>105.40â‚¬</span>
                    </div>
                </div>
            </div>

            <div class="pdf-section notes-section" id="notes-section">
                <div class="section-title">Î Î±ÏÎ±Ï„Î·ÏÎ®ÏƒÎµÎ¹Ï‚</div>
                <div class="notes-content" id="notes-content"></div>
            </div>

            <div class="pdf-section notes-section" id="notes-placeholder-section" style="display: none;">
                <div class="section-title">Î Î±ÏÎ±Ï„Î·ÏÎ®ÏƒÎµÎ¹Ï‚</div>
                <div class="notes-placeholder">
                    ÎŸÎ¹ Ï€Î±ÏÎ±Ï„Î·ÏÎ®ÏƒÎµÎ¹Ï‚ ÏƒÏ…Î½ÎµÏ‡Î¯Î¶Î¿Î½Ï„Î±Î¹ ÏƒÏ„Î· 2Î· ÏƒÎµÎ»Î¯Î´Î± â†’
                </div>
            </div>
        </div>

        <div class="pdf-footer">
            <p>Î‘Ï…Ï„ÏŒ Ï„Î¿ Î­Î³Î³ÏÎ±Ï†Î¿ Î´Î·Î¼Î¹Î¿Ï…ÏÎ³Î®Î¸Î·ÎºÎµ Î±Ï…Ï„ÏŒÎ¼Î±Ï„Î± Î±Ï€ÏŒ Ï„Î¿ ÏƒÏÏƒÏ„Î·Î¼Î± Î´Î¹Î±Ï‡ÎµÎ¯ÏÎ¹ÏƒÎ·Ï‚ ÎµÏÎ³Î±ÏƒÎ¹ÏÎ½.</p>
            <p>Î•Î½Ï„Î¿Î»Î® Î•ÏÎ³Î±ÏƒÎ¯Î±Ï‚ ID: WO-2024-001</p>
            <p>Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î± Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î±Ï‚: <span id="footer-date"></span></p>
        </div>
    </div>

    <!-- Page 2 Template (Hidden) -->
    <div id="pdf-page-2" class="pdf-page-2" style="display: none;">
        <div class="page-2-header">
            <div class="page-2-title">Î•Î½Ï„Î¿Î»Î® Î•ÏÎ³Î±ÏƒÎ¯Î±Ï‚ - Î Î±ÏÎ±Ï„Î·ÏÎ®ÏƒÎµÎ¹Ï‚ (Î£ÎµÎ»Î¯Î´Î± 2)</div>
            <div class="date" id="page-2-date"></div>
        </div>

        <div class="pdf-section">
            <div class="section-title">Î Î±ÏÎ±Ï„Î·ÏÎ®ÏƒÎµÎ¹Ï‚ (ÏƒÏ…Î½Î­Ï‡ÎµÎ¹Î±)</div>
            <div class="page-2-notes" id="page-2-notes-content"></div>
        </div>

        <div class="pdf-footer">
            <p>Î•Î½Ï„Î¿Î»Î® Î•ÏÎ³Î±ÏƒÎ¯Î±Ï‚ ID: WO-2024-001 - Î£ÎµÎ»Î¯Î´Î± 2</p>
            <p>Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î± Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î±Ï‚: <span id="page-2-footer-date"></span></p>
        </div>
    </div>

    <script>
        // Set current date
        const currentDate = new Date().toLocaleDateString('el-GR');
        document.getElementById('current-date').textContent = currentDate;
        document.getElementById('footer-date').textContent = currentDate;
        document.getElementById('page-2-date').textContent = currentDate;
        document.getElementById('page-2-footer-date').textContent = currentDate;

        function testShortNotes() {
            document.getElementById('notesInput').value = "Î‘Ï…Ï„Î­Ï‚ ÎµÎ¯Î½Î±Î¹ ÏƒÏÎ½Ï„Î¿Î¼ÎµÏ‚ Ï€Î±ÏÎ±Ï„Î·ÏÎ®ÏƒÎµÎ¹Ï‚ Ï€Î¿Ï… Ï‡Ï‰ÏÎ¬Î½Îµ ÏƒÏ„Î·Î½ Ï€ÏÏÏ„Î· ÏƒÎµÎ»Î¯Î´Î±.";
        }

        function testLongNotes() {
            document.getElementById('notesInput').value = `Î‘Ï…Ï„Î­Ï‚ ÎµÎ¯Î½Î±Î¹ Ï€Î¿Î»Ï Î¼ÎµÎ³Î¬Î»ÎµÏ‚ Ï€Î±ÏÎ±Ï„Î·ÏÎ®ÏƒÎµÎ¹Ï‚ Ï€Î¿Ï… Î´ÎµÎ½ Î¸Î± Ï‡Ï‰ÏÎ­ÏƒÎ¿Ï…Î½ ÏƒÏ„Î·Î½ Ï€ÏÏÏ„Î· ÏƒÎµÎ»Î¯Î´Î±.

Î— ÎµÏÎ³Î±ÏƒÎ¯Î± Ï€Î¿Ï… Ï€ÏÎ±Î³Î¼Î±Ï„Î¿Ï€Î¿Î¹Î®Î¸Î·ÎºÎµ Ï€ÎµÏÎ¹Î»Î±Î¼Î²Î¬Î½ÎµÎ¹:

1. Î Î»Î®ÏÎ· Î±Î»Î»Î±Î³Î® Î»Î±Î´Î¹ÏÎ½ Î¼Îµ Ï‡ÏÎ®ÏƒÎ· ÏƒÏ…Î½Î¸ÎµÏ„Î¹ÎºÎ¿Ï Î»Î±Î´Î¹Î¿Ï Ï…ÏˆÎ·Î»Î®Ï‚ Ï€Î¿Î¹ÏŒÏ„Î·Ï„Î±Ï‚
2. Î‘Î½Ï„Î¹ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ· Ï†Î¯Î»Ï„ÏÎ¿Ï… Î»Î±Î´Î¹Î¿Ï Î¼Îµ Î³Î½Î®ÏƒÎ¹Î¿ Î±Î½Ï„Î±Î»Î»Î±ÎºÏ„Î¹ÎºÏŒ
3. ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ ÏŒÎ»Ï‰Î½ Ï„Ï‰Î½ Ï…Î³ÏÏÎ½ Ï„Î¿Ï… Î¿Ï‡Î®Î¼Î±Ï„Î¿Ï‚
4. ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ Ï†ÏÎ­Î½Ï‰Î½ ÎºÎ±Î¹ Î´Î¹ÏƒÎºÏŒÏ€Î»Î±ÎºÏ‰Î½
5. ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ ÎµÎ»Î±ÏƒÏ„Î¹ÎºÏÎ½ ÎºÎ±Î¹ Ï€Î¯ÎµÏƒÎ·Ï‚ Î±Î­ÏÎ±
6. ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ Î¼Ï€Î±Ï„Î±ÏÎ¯Î±Ï‚ ÎºÎ±Î¹ ÏƒÏ…ÏƒÏ„Î®Î¼Î±Ï„Î¿Ï‚ Ï†ÏŒÏÏ„Î¹ÏƒÎ·Ï‚
7. ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ Ï†ÏÏ„Ï‰Î½ ÎºÎ±Î¹ Î·Î»ÎµÎºÏ„ÏÎ¹ÎºÎ¿Ï ÏƒÏ…ÏƒÏ„Î®Î¼Î±Ï„Î¿Ï‚

Î Î±ÏÎ±Ï„Î·ÏÎ®ÏƒÎµÎ¹Ï‚:
- Î¤Î± Ï†ÏÎ­Î½Î± ÎµÎ¯Î½Î±Î¹ ÏƒÎµ ÎºÎ±Î»Î® ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·
- Î— Î¼Ï€Î±Ï„Î±ÏÎ¯Î± Ï‡ÏÎµÎ¹Î¬Î¶ÎµÏ„Î±Î¹ Î±Î½Ï„Î¹ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ· ÏƒÏÎ½Ï„Î¿Î¼Î±
- Î¤Î¿ Î´ÎµÎ¾Î¯ Î¼Ï€ÏÎ¿ÏƒÏ„Î¹Î½ÏŒ ÎµÎ»Î±ÏƒÏ„Î¹ÎºÏŒ Î­Ï‡ÎµÎ¹ Î¼Î¹ÎºÏÎ® Ï†Î¸Î¿ÏÎ¬
- Î¤Î¿ ÏƒÏÏƒÏ„Î·Î¼Î± ÎºÎ»Î¹Î¼Î±Ï„Î¹ÏƒÎ¼Î¿Ï Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³ÎµÎ¯ ÎºÎ±Î½Î¿Î½Î¹ÎºÎ¬

Î£Ï…ÏƒÏ„Î¬ÏƒÎµÎ¹Ï‚:
- Î•Ï€ÏŒÎ¼ÎµÎ½Î¿ service ÏƒÎµ 10,000 Ï‡Î¹Î»Î¹ÏŒÎ¼ÎµÏ„ÏÎ± Î® 6 Î¼Î®Î½ÎµÏ‚
- Î‘Î½Ï„Î¹ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ· Î¼Ï€Î±Ï„Î±ÏÎ¯Î±Ï‚ ÎµÎ½Ï„ÏŒÏ‚ 2 Î¼Î·Î½ÏÎ½
- ÎˆÎ»ÎµÎ³Ï‡Î¿Ï‚ ÎµÏ…Î¸Ï…Î³ÏÎ¬Î¼Î¼Î¹ÏƒÎ·Ï‚ Ï„ÏÎ¿Ï‡ÏÎ½

Î•Ï€Î¹Ï€Î»Î­Î¿Î½ ÏƒÎ·Î¼ÎµÎ¹ÏÏƒÎµÎ¹Ï‚:
ÎŸ Ï€ÎµÎ»Î¬Ï„Î·Ï‚ ÎµÎ½Î·Î¼ÎµÏÏÎ¸Î·ÎºÎµ Î³Î¹Î± ÏŒÎ»ÎµÏ‚ Ï„Î¹Ï‚ ÎµÏÎ³Î±ÏƒÎ¯ÎµÏ‚ Ï€Î¿Ï… Ï€ÏÎ±Î³Î¼Î±Ï„Î¿Ï€Î¿Î¹Î®Î¸Î·ÎºÎ±Î½ ÎºÎ±Î¹ Ï„Î¹Ï‚ ÏƒÏ…ÏƒÏ„Î¬ÏƒÎµÎ¹Ï‚ Î¼Î±Ï‚. Î¤Î¿ ÏŒÏ‡Î·Î¼Î± Ï€Î±ÏÎ±Î´ÏŒÎ¸Î·ÎºÎµ ÏƒÎµ Î¬ÏÎ¹ÏƒÏ„Î· ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ·.

Î¥Ï€Î¿Î³ÏÎ±Ï†Î® Ï„ÎµÏ‡Î½Î¹ÎºÎ¿Ï: Î“Î¹Î¬Î½Î½Î·Ï‚ ÎœÎ·Ï‡Î±Î½Î¹ÎºÏŒÏ‚
Î—Î¼ÎµÏÎ¿Î¼Î·Î½Î¯Î±: ${currentDate}`;
        }

        async function generatePDF() {
            const notesText = document.getElementById('notesInput').value;
            
            // Always show placeholder on page 1 (no notes)
            document.getElementById('notes-section').style.display = 'none';
            document.getElementById('notes-placeholder-section').style.display = 'block';
            
            // Put all notes on page 2
            document.getElementById('page-2-notes-content').textContent = notesText;
            
            // Make page 2 visible for html2canvas capture
            const page2Element = document.getElementById('pdf-page-2');
            page2Element.style.display = 'block';
            page2Element.style.position = 'absolute';
            page2Element.style.left = '-9999px';
            page2Element.style.top = '0';
            page2Element.style.opacity = '1';
            page2Element.style.pointerEvents = 'none';
            page2Element.style.zIndex = '1';
            
            await generateTwoPagePDF();
            
            // Hide page 2 again after PDF generation
            page2Element.style.display = 'none';
            page2Element.style.opacity = '0';
        }

        function checkIfNotesNeedSecondPage(notesText) {
            // Simple heuristic: if notes are longer than 300 characters or have more than 8 lines
            const lineCount = notesText.split('\n').length;
            const charCount = notesText.length;
            
            return charCount > 300 || lineCount > 8;
        }

        async function generateSinglePagePDF() {
            console.log('Generating single page PDF...');
            
            const page1Element = document.getElementById('pdf-page-1');
            
            try {
                // Wait for element to be ready
                await new Promise(resolve => setTimeout(resolve, 100));
                
                // Capture page 1
                const canvas = await html2canvas(page1Element, {
                    scale: 2,
                    backgroundColor: "#ffffff",
                    useCORS: true,
                    allowTaint: false
                });

                const imgData = canvas.toDataURL("image/jpeg", 1.0);

                // Create PDF
                const { jsPDF } = window.jspdf;
                const pdf = new jsPDF("p", "mm", "a4");
                const pdfWidth = pdf.internal.pageSize.getWidth();
                const pdfHeight = (canvas.height * pdfWidth) / canvas.width;

                pdf.addImage(imgData, "JPEG", 0, 0, pdfWidth, pdfHeight);
                pdf.save("work-order-single-page.pdf");
                
                console.log('Single page PDF generated successfully!');
            } catch (error) {
                console.error('Error generating single page PDF:', error);
                alert('Error generating PDF: ' + error.message);
            }
        }

        async function generateTwoPagePDF() {
            console.log('Generating two page PDF...');
            
            const page1Element = document.getElementById('pdf-page-1');
            const page2Element = document.getElementById('pdf-page-2');
            
            try {
                // Wait for elements to be ready
                await new Promise(resolve => setTimeout(resolve, 100));
                
                // Capture page 1
                const canvas1 = await html2canvas(page1Element, {
                    scale: 2,
                    backgroundColor: "#ffffff",
                    useCORS: true,
                    allowTaint: false
                });

                // Capture page 2
                const canvas2 = await html2canvas(page2Element, {
                    scale: 2,
                    backgroundColor: "#ffffff",
                    useCORS: true,
                    allowTaint: false
                });

                const imgData1 = canvas1.toDataURL("image/jpeg", 1.0);
                const imgData2 = canvas2.toDataURL("image/jpeg", 1.0);

                // Create PDF
                const { jsPDF } = window.jspdf;
                const pdf = new jsPDF("p", "mm", "a4");
                const pdfWidth = pdf.internal.pageSize.getWidth();
                
                // Add page 1
                const pdfHeight1 = (canvas1.height * pdfWidth) / canvas1.width;
                pdf.addImage(imgData1, "JPEG", 0, 0, pdfWidth, pdfHeight1);
                
                // Add page 2
                pdf.addPage();
                const pdfHeight2 = (canvas2.height * pdfWidth) / canvas2.width;
                pdf.addImage(imgData2, "JPEG", 0, 0, pdfWidth, pdfHeight2);
                
                pdf.save("work-order-two-pages.pdf");
                
                console.log('Two page PDF generated successfully!');
            } catch (error) {
                console.error('Error generating two page PDF:', error);
                alert('Error generating PDF: ' + error.message);
            }
        }

        // Initialize with default notes
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Demo loaded successfully!');
            console.log('html2canvas available:', typeof html2canvas !== 'undefined');
            console.log('jsPDF available:', typeof window.jspdf !== 'undefined');
        });
    </script>
</body>
</html>